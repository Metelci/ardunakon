What's New in v0.2.6-alpha:

üîí **Critical BLE Safety Fix**:
    ‚Ä¢ **Motor Spin Bug Fixed**: Resolved issue where motor unexpectedly spins on BLE reconnect (Android 15/16)
    ‚Ä¢ **Root Cause**: Stale joystick/steering values in write queue caused Arcade Drive to activate motors on reconnect
    ‚Ä¢ **Affected Devices**: Arduino UNO R3 clones with external BLE modules (HM-10, etc.)

üõ°Ô∏è **Safety Improvements**:
    ‚Ä¢ **Connection State Check**: Transmission loop now only sends packets when actually connected
    ‚Ä¢ **State Reset on Disconnect**: Joystick and servo values automatically reset to neutral on disconnect
    ‚Ä¢ **Write Queue Cleared**: BLE write queue cleared on new connection to prevent stale packet bursts
    ‚Ä¢ **Startup Delay**: 200ms delay after BLE connection before packet processing for stack stabilization

üîß **Technical Details**:
    ‚Ä¢ Fixed in: ControlViewModel.kt (connection check + state observer)
    ‚Ä¢ Fixed in: BluetoothManager.kt (queue clear + startup delay in startWriteQueue)
    ‚Ä¢ No changes to Arduino sketches required

---

What's New in v0.2.5-alpha:

üßπ **Code Cleanup & Optimization**:
    ‚Ä¢ **Removed Orphaned Components**: Eliminated 4 unused files (~450 lines) including duplicate debug console and unused sensor dashboard
    ‚Ä¢ **Security Package Cleanup**: Removed unused HandshakeManager and TrustStore classes that were never instantiated
    ‚Ä¢ **Better Project Organization**: Relocated example Arduino sketches to dedicated examples/ directory
    ‚Ä¢ **Comprehensive Documentation**: Added detailed README files for all Arduino sketches explaining core vs optional projects

üìö **Arduino Sketches Documentation**:
    ‚Ä¢ **Core Sketches Guide**: Clear documentation for ArdunakonClassicUno, ArdunakonR4WiFi, ArdunakonUnoQ, and ArdunakonOTA
    ‚Ä¢ **Pin Configuration Reference**: Complete pin mapping for motors, servos, and battery monitoring
    ‚Ä¢ **Bluetooth Compatibility Matrix**: Detailed module support (HC-06, HC-05, HM-10, HC-08, MLT-BT05)
    ‚Ä¢ **Example Projects**: EnvMonitor, MoodLight, and SecuritySystem now clearly marked as optional Modulino examples

üîß **Technical Improvements**:
    ‚Ä¢ **Cleaner Codebase**: Reduced code complexity and improved maintainability
    ‚Ä¢ **Build Verification**: All changes verified with successful compilation
    ‚Ä¢ **No Breaking Changes**: All active features remain fully functional

---

What's New in v0.2.4-alpha:

üèóÔ∏è **Architecture Refactoring**:
    ‚Ä¢ **ControlScreen Decomposition**: Reduced ControlScreen.kt from 2,033 to 1,030 lines (-49%)
    ‚Ä¢ **Component Extraction**: Extracted reusable components (ControlHeaderBar, JoystickPanel, ServoPanel)
    ‚Ä¢ **Dialog Organization**: Moved dialogs to dedicated folder (DeviceListDialog)
    ‚Ä¢ **ViewModel Ready**: Created ControlViewModel for future state management

üéÆ **UX Enhancements**:
    ‚Ä¢ **Haptic Feedback**: Joystick now vibrates at center deadzone and edge boundaries
    ‚Ä¢ **Connection Quality Ring**: Visual ring around joystick shows connection latency (green/yellow/orange/red)

üßπ **Simplifications**:
    ‚Ä¢ **Single Profile**: Removed profile management UI, app uses single default car/rover profile
    ‚Ä¢ **Dark Theme Only**: Removed light theme conditionals for cleaner code

üîß **Build Updates**:
    ‚Ä¢ **Gradle 8.11.1**: Updated Gradle wrapper for latest Android plugin compatibility
    ‚Ä¢ **Zero Warnings**: All Kotlin compilation warnings resolved

---

What's New in v0.2.3-alpha:

üì° **WiFi Telemetry & Monitoring**:
    ‚Ä¢ **Battery Data on WiFi**: Battery voltage and device status now correctly display when connected via WiFi (R4 WiFi / Uno Q)
    ‚Ä¢ **Graph Integration**: WiFi telemetry data now plots on the real-time graph, same as Bluetooth

üîß **Debug & UI Fixes**:
    ‚Ä¢ **Reduced Log Noise**: Throttled battery telemetry logs in the debug console (now once every 5s) to prevent spam
    ‚Ä¢ **Landscape Telemetry**: Fixed layout overflow issues in the Telemetry Graph window when using landscape mode
    ‚Ä¢ **Help Menu Accessibility**: "Open Arduino Cloud" and "View Full Guide" buttons are now always accessible on smaller screens
    ‚Ä¢ **WiFi Connection Stability**: Improved WiFi connection handling for R4 WiFi boards
---

What's New in v0.2.2-alpha:

üîó **Arduino R4 WiFi Connection Fix**:
    ‚Ä¢ **BLE Path Enforcement**: App now correctly identifies R4 WiFi boards and forces BLE connection mode, fixing motor/servo control failures caused by incorrect Classic Bluetooth attempts
    ‚Ä¢ **Improved Device Detection**: Added "ARDUNAKON", "ARDUINO", "R4", "UNO R4" to BLE-only device name detection

üì± **Portrait Mode UI Improvements**:
    ‚Ä¢ **Status Bar Visibility**: System notification bar icons (time, wifi, battery) now display with correct light/dark contrast
    ‚Ä¢ **Button Spacing**: Improved header button spacing (12-16dp) for better touch targets and visual balance

üéÆ **Debug Terminal Servo Commands**:
    ‚Ä¢ **Terminal Control**: Type W/A/L/R/B commands directly in the debug terminal to control servos
    ‚Ä¢ **Toggle Behavior**: Commands toggle servo position (e.g., W toggles forward/center)
    ‚Ä¢ **Works Everywhere**: Available in embedded terminal, maximized debug window, and debug console

üõ†Ô∏è **Code Quality**:
    ‚Ä¢ **Cleaner Code**: Fixed compiler warnings (unused variables, name shadowing)
    ‚Ä¢ **Stability**: Improved CancellationException handling in coroutines

---

What's New in v0.2.1-alpha:

üîß **Arduino R4 WiFi Servo & ESC Update**:
    ‚Ä¢ **Fixed Servo Pins**: Servos now on Pin 6 (X) and Pin 7 (Y) for better R4 WiFi compatibility
    ‚Ä¢ **Brushless ESC Support**: Added ESC control on Pin 9 for airplane/drone brushless motors
    ‚Ä¢ **Removed DC Motor Driver Code**: Simplified sketch for servo + ESC setups
    ‚Ä¢ **Servo Library Fix**: Documentation updated to require Servo v1.2.2+ (fixes R4 WiFi PWM bug)

üìù **Documentation Updates**:
    ‚Ä¢ Updated setup guide with new R4 WiFi wiring diagram
    ‚Ä¢ Added ESC throttle control notes (airplane ESC, no reverse)

---

What's New in v0.2.0-alpha:

üïπÔ∏è **Major Control Update: Arcade Drive & Servos**:
     ‚Ä¢ **Arcade Drive**: Drive your robot with a single joystick! The Left Stick now controls both Throttle and Steering for intuitive one-handed driving.
     ‚Ä¢ **Dedicated Servo Control**: The W, A, L, R buttons are now fully dedicated to controlling two servos (Pin 6 and Pin 7), perfect for pan-tilt cameras or robot arms.
     ‚Ä¢ **Universal Board Support**: These features are now available on ALL supported boards: Classic Arduino UNO, UNO R4 WiFi, and UNO Q.

---

What's New in v0.1.84-alpha:

?? **BLE Servo Reliability (HM-10/MLT-BT05)**:
     Forced WRITE_NO_RESPONSE writes with better error logging to reduce stalls on HM-10/MLT-BT05 clones
     Improved reconnection handling on transient GATT failures for BLE-only modules

?? **Telemetry Charts**:
     Axis labels now display numeric values (dBm, volts, ms) directly on the graphs

?? **UI Cleanup**:
     Restored embedded debug panel on the right and removed redundant keyboard state labels

---



Previous Release - v0.1.75-alpha:

üîß **HC-06 on Xiaomi/MIUI - Deep Fix**:
   ‚Ä¢ **Auto-Enable Reflection**: Xiaomi/Redmi/Poco devices now automatically enable reflection fallback without manual toggle
   ‚Ä¢ **Stream Initialization Fix**: Added 500ms delay before accessing socket streams on Xiaomi devices to prevent "read failed" errors
   ‚Ä¢ **Enhanced Error Handling**: Wrapped stream initialization with try-catch to gracefully handle MIUI blocking
   ‚Ä¢ **Device Diagnostics**: Added manufacturer/model/Android version logging for better troubleshooting
   ‚Ä¢ **Xiaomi-First Strategy**: Reflection Port 1 attempted FIRST on Xiaomi devices, before standard SPP

üé® **UI Improvements**:
   ‚Ä¢ **Connected Status Visual**: Device slot buttons now show soft green shadow when connected for clear status indication
   ‚Ä¢ **Servo Button Logging**: WASD servo control buttons now log commands to debug window in real-time

---

Previous Release - v0.1.7-alpha:

üîå **UNO R4 WiFi + Clones**:
   ‚Ä¢ **Dual BLE Profile**: R4 WiFi sketch now advertises both ArduinoBLE default (19B10000/19B10001) and HM-10 UUIDs so official boards and BLE-capable clones connect natively
   ‚Ä¢ **Docs Updated**: Setup guide and compatibility matrix explicitly cover R4 WiFi clone support and dual-UUID advertising
   ‚Ä¢ **Attribution Fixed**: All Arduino sketches now point to github.com/Metelci/ardunakon

üîß **HC-06 on Xiaomi/MIUI**:
   ‚Ä¢ **OEM Reflection Fallback**: Automatically enables Reflection Port 1 on Xiaomi/Redmi/Poco devices when SPP fails, fixing HC-06 connects on MIUI/Android 12+

---

Previous Release - v0.1.6-alpha:

üéÆ **RC Car Control Layout**:
   ‚Ä¢ **Left Joystick ‚Üí Throttle**: Now controls RC motor with vertical-only movement, no horizontal drift
   ‚Ä¢ **Right Joystick ‚Üí WASD Buttons**: Replaced with discrete servo control buttons (Up/Down/Left/Right)
   ‚Ä¢ **Throttle Behavior**: Non-centering Y-axis stays at last position for smooth RC car speed control
   ‚Ä¢ **Instant Servo Control**: WASD buttons provide full deflection on tap for precise steering/pan-tilt

üîÑ **Auto-Reconnect Toggle Buttons**:
   ‚Ä¢ **Manual Control**: Added toggle buttons next to Dev 1 and Dev 2 for disabling auto-reconnect per device
   ‚Ä¢ **Symmetrical Layout**: Toggles placed on opposite sides of status cards for clean, balanced appearance
   ‚Ä¢ **36dp Size**: Matched to status card height for visual consistency
   ‚Ä¢ **Persistent State**: Auto-reconnect preferences saved across app restarts

üîß **BLE GATT Connection Improvements**:
   ‚Ä¢ **Error 147 Handling**: Added intelligent retry logic for BLE link layer failures
   ‚Ä¢ **Transient Error Detection**: Classifies GATT errors (8, 129, 147) as retry-able vs permanent (133)
   ‚Ä¢ **Exponential Backoff**: 2s ‚Üí 4s ‚Üí 6s delays before marking connection as failed
   ‚Ä¢ **Better Diagnostics**: Human-readable error messages (e.g., "Link Layer Failure: Device reset or interference")
   ‚Ä¢ **Device Name Resolution**: Fixed "Connecting to null" logs, always shows device name or MAC address
   ‚Ä¢ **Pre-flight Checks**: Verifies Bluetooth adapter state with 500ms settling delay

üì° **Device Name Improvements**:
   ‚Ä¢ **Cache Refresh**: Device names refreshed in debug window on every connection attempt
   ‚Ä¢ **Android 12+ Compatibility**: Multi-layer name resolution ensures names display correctly on all devices
   ‚Ä¢ **Scan Window**: Device names always show correctly in Bluetooth device scan list

üé® **UI Polish**:
   ‚Ä¢ **Compact Labels**: Reduced font sizes for control labels (Throttle/Servos) to accommodate debug panel
   ‚Ä¢ **Lowercase WASD**: Changed "(WASD)" to "(wasd)" to prevent line wrapping
   ‚Ä¢ **Better Spacing**: Optimized padding (12dp ‚Üí 8dp) for cleaner layout with debug window open
   ‚Ä¢ **Menu Clarification**: "Legacy Reflection Connect" renamed to "Legacy Reflection (HC-06)" for clarity

üõ†Ô∏è **Technical Stability**:
   ‚Ä¢ Circuit breaker pattern prevents connection hammering (10 attempt limit)
   ‚Ä¢ Enhanced GATT cleanup: disconnect() ‚Üí 200ms delay ‚Üí close()
   ‚Ä¢ Improved mutex handling prevents connection storms
   ‚Ä¢ Reset backoff counters on successful GATT connection

---

Previous Release - v0.1.5-alpha:

üîí **Bluetooth Connectivity Improvements**:
   ‚Ä¢ **Bounded Write Queue**: Added 100-packet capacity limit for BLE connections to prevent memory growth during connectivity issues
   ‚Ä¢ **3-Strike Retry Logic**: Classic Bluetooth now tolerates up to 3 consecutive read errors before disconnecting, improving resilience against transient interference
   ‚Ä¢ **Enhanced Write Error Handling**: Write failures now properly trigger reconnection instead of silent failure
   ‚Ä¢ **Optimized BLE Timeout**: Extended connection timeout to 15 seconds for better compatibility with slower BLE modules (HC-08, HM-10 clones)

üïπÔ∏è **Joystick Control Enhancements**:
   ‚Ä¢ **Auto-Centering**: Both joysticks now automatically return to center when released for more precise control
   ‚Ä¢ **Clear Labeling**: Added descriptive labels - "Movement (Servos)" for left stick and "Throttle (Speed)" for right stick
   ‚Ä¢ **Side Labels**: Labels now appear beside joysticks for better visibility and cleaner layout
   ‚Ä¢ **Perfect Alignment**: Joysticks now properly centered in their respective screen halves

üé® **UI Polish**:
   ‚Ä¢ **Help Icon**: Replaced three-dot menu with friendly question mark (?) icon for easier recognition
   ‚Ä¢ **Improved Layout**: Better spacing and arrangement throughout control screen

üõ†Ô∏è **Technical Stability**:
   ‚Ä¢ Enhanced connection mutex system to prevent connection storms
   ‚Ä¢ Improved resource cleanup in all failure scenarios
   ‚Ä¢ Better error logging for diagnostic purposes

---

Previous Release - v0.1.4-alpha:

üé® **UI/UX Enhancements**:
   ‚Ä¢ **Fullscreen Optimization**: Fixed layout to properly respect system notification bar and navigation buttons - no more overlapping UI elements!
   ‚Ä¢ **Centered Control Layout**: Reorganized E-STOP, signal indicators, and control buttons into a clean centered layout for better visibility and balance.
   ‚Ä¢ **Electric Yellow Device Buttons**: Dev 1 and Dev 2 status buttons now use bright electric yellow for instant visibility.
   ‚Ä¢ **Streamlined Interface**: Removed redundant Bluetooth icons and optimized joystick alignment for a cleaner look.
   ‚Ä¢ **Theme Toggle Relocated**: Theme switcher moved to top bar alongside Bluetooth and menu buttons for easier access.

üéØ **Layout Improvements**:
   ‚Ä¢ **Perfect Joystick Alignment**: Both joysticks now align perfectly at the same height with labels consistently positioned below.
   ‚Ä¢ **Centered Slot Info**: Slot 1 and Slot 2 information displayed side-by-side at center for better readability.
   ‚Ä¢ **Optimized Spacing**: Improved icon positioning throughout the app for better visual balance.

üõ†Ô∏è **Technical Updates**:
   ‚Ä¢ Enabled edge-to-edge display with proper WindowInsets handling
   ‚Ä¢ Applied safe drawing padding to prevent system UI overlap
   ‚Ä¢ Cleaned up code warnings and improved build efficiency
